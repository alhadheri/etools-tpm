<!--import [polymer, module-styles, page-layout-styles, shared-styles, list-tab-main, dialog-element, create-visit,
            search-and-filter, visits-list-data, pages-header-element, permission-controller, tab-inputs-styles,
            common-methods-behavior,  app-route/app-location, last-created-behavior]-->

<dom-module id="visits-list-view">
    <template>
        <style include="page-layout-styles shared-styles module-styles tab-inputs-styles">
            :host {
                position: relative;
                display: block;
            }

            pages-header-element { box-shadow: 1px -3px 9px 0 #000000; }

            etools-searchable-multiselection-menu {
                --esmm-list-wrapper: #{'{
                    max-height: 340px;
                    -ms-overflow-style: auto;
                }'};
            }
        </style>

        <create-visit partner-id="{{newPartnerId}}"></create-visit>
        <app-location path="{{path}}"></app-location>

        <visits-list-data
                id="listData"
                visits-list="{{visitsList}}"
                request-queries="[[requestQueries]]"
                without-pagination="[[withoutPagination]]">
        </visits-list-data>

        <pages-header-element
                show-export-button
                export-link="[[_setExportLink()]]"
                show-add-button="{{_showAddButton()}}"
                btn-text="Add New Visit"
                page-title="List of Visits">
        </pages-header-element>

        <list-tab-main
                header-title="Visits"
                data="[[visitsList]]"
                headings="[[listHeadings]]"
                query-params="{{queryParams}}"
                details="[[listDetails]]"
                without-pagination
                has-collapse
                no-table-title>
        </list-tab-main>

        <dialog-element
                opened="{{dialogOpened}}"
                request-in-process="[[requestInProcess]]"
                dialog-title="Add new Visit"
                confirm-btn-text="Add">

            <div class="row-h repeatable-item-container" without-line>
                <!-- TPM Vendor -->
                <etools-searchable-multiselection-menu
                        id="partnerInput"
                        options="[[partnerOrganisations]]"
                        class="disabled-as-readonly validate-input required"
                        value="{{partnerOrganisation}}"
                        label="TPM Vendor"
                        placeholder="Select TPM Vendor"
                        custom-object-options
                        option-value="id"
                        option-label="name"
                        required
                        disabled$="[[requestInProcess]]"
                        readonly$="[[requestInProcess]]"
                        on-focus="_resetFieldError"></etools-searchable-multiselection-menu>
            </div>

        </dialog-element>
    </template>

    <!-- inject scripts './visits-list-view.js'-->
</dom-module>