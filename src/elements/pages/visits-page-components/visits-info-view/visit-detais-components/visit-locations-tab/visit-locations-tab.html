<!--import [polymer, paper-fab, paper-icon-button, paper-input, etools-searchable-multiselection-menu]-->
<!--import [tab-inputs-styles, repeatable-data-sets-behavior, type-of-site-item]-->

<dom-module id="visit-locations-tab">
    <template>
        <!-- inject styles './visit-locations-tab.scss'-->
        <style include="tab-inputs-styles"></style>

        <etools-content-panel title$="Locations ([[dataItems.length]])" show-expand-btn>

            <div hidden$="[[_emptyList(dataItems.length)]]">
                <template is="dom-repeat" items="{{dataItems}}" as="location">


                    <div class="row-h repeatable-item-container">
                        <div class="repeatable-item-actions">
                            <div class="row-v actions">
                                <paper-icon-button class="action delete"
                                                   on-tap="_openDeleteConfirmation"
                                                   data-args$="[[index]]"
                                                   disabled="[[!_canBeRemoved(index)]]"
                                                   hidden$="[[!editMode]]"
                                                   icon="cancel"></paper-icon-button>
                            </div>
                        </div>
                        <div class="repeatable-item-content">

                            <div class="repeatable-item-index">
                                <div class="item-index">[[_getItemNumber(index)]]</div>
                            </div>

                            <div class="row-h group">
                                <div class="input-container input-container-ms">
                                    <!-- Location -->
                                    <etools-searchable-multiselection-menu
                                            readonly="[[!editMode]]"
                                            label="Location"
                                            placeholder="&#8212;"></etools-searchable-multiselection-menu>
                                </div>
                            </div>

                            <div class="row-h group">
                                <div class="input-container input-container-l">
                                    <!-- Sectors Covered -->
                                    <etools-searchable-multiselection-menu
                                            readonly="[[!editMode]]"
                                            label="Sectors Covered"
                                            placeholder="&#8212;"></etools-searchable-multiselection-menu>
                                </div>
                            </div>

                            <type-of-site-item data-items="{{location.type_of_sites}}"></type-of-site-item>

                        </div>
                    </div>
                </template>
            </div>
            <div class="row-h" hidden$="[[!_emptyList(dataItems.length)]]">
                <p>There are no locations added.</p>
            </div>

            <div id="bottom-actions" class="row-h" hidden$="[[!editMode]]">
                <paper-fab icon="add"
                           on-tap="_addNewLocation"
                           title="Add"></paper-fab>
            </div>


        </etools-content-panel>

            </template>

    <!-- inject scripts './visit-locations-tab.js'-->
</dom-module>