<!--import [polymer, etools-content-panel, paper-input/paper-textarea, etools-searchable-multiselection-menu, etools-searchable-multiselection-menu]-->
<!--import [tab-inputs-styles, module-styles, repeatable-data-sets-behavior]-->

<dom-module id="visit-report-questions-tab">
    <template>

        <style include="tab-inputs-styles module-styles"></style>
        <!-- inject styles './visit-report-questions-tab.scss'-->
            <div class="questions-title">Questions</div>

            <div hidden$="[[_emptyList(dataItems.length)]]">
                <template is="dom-repeat" items="{{dataItems}}">


                    <div class="row-h repeatable-item-container">
                        <div class="repeatable-item-actions">
                            <div class="row-v actions">
                                <paper-icon-button class="action delete"
                                                   on-tap="_openDeleteConfirmation"
                                                   data-args$="[[index]]"
                                                   disabled="[[!_canBeRemoved(index)]]"
                                                   hidden$="[[!editMode]]"
                                                   icon="cancel"></paper-icon-button>
                            </div>
                        </div>
                        <div class="repeatable-item-content">

                            <div class="repeatable-item-index">
                                <div class="item-index">[[_getItemNumber(index)]]</div>
                            </div>

                            <div class="row-h group">
                                <div class="input-container input-container-s">
                                    <!-- Category -->
                                    <etools-searchable-multiselection-menu
                                            hide-search
                                            class="disabled-as-readonly"
                                            readonly="[[!editMode]]"
                                            disabled="[[!editMode]]"
                                            label="Category"
                                            value="{{item.category}}"
                                            options="[[categories]]"
                                            placeholder="&#8212;"></etools-searchable-multiselection-menu>
                                </div>
                                <div class="input-container input-container-m">
                                    <!-- Question -->
                                    <paper-textarea label="Question"
                                                    class="disabled-as-readonly"
                                                    value="{{item.question}}"
                                                    placeholder="&#8212;"
                                                    disabled$="[[!editMode]]">
                                    </paper-textarea>
                                </div>
                            </div>
                        </div>
                    </div>



                </template>
            </div>

            <div class="row-h" hidden$="[[!_emptyList(dataItems.length)]]">
                <p>There are no questions added.</p>
            </div>

            <div id="bottom-actions" class="row-h" hidden$="[[!editMode]]">
                <paper-button
                        class="add-question-button"
                        raised
                        on-tap="_addNewQuestion"
                        title="Add"><iron-icon icon="add"></iron-icon>Add question</paper-button>
            </div>
    </template>

    <!-- inject scripts './visit-report-questions-tab.js'-->
</dom-module>