<!--import [polymer, etools-ajax-sp, lodash]-->
<!--import [permission-controller, etools-app-config, update-data-behavior]-->

<dom-module id="update-visit-details-data">
    <template>
        <etools-ajax-sp
                method="{{method}}"
                url="{{url}}"
                body="{{postData}}"
                on-success="_handleResponse"
                on-fail="_handleError">
        </etools-ajax-sp>

        <etools-ajax-sp
                method="OPTIONS"
                url="[[optionsUrl]]"
                on-success="_handleOptionsResponse"
                on-fail="_handleOptionsResponse">
        </etools-ajax-sp>
    </template>

    <script>
        Polymer({
            is: 'update-visit-details-data',

            behaviors: [
                etoolsAppConfig.globals,
                TPMBehaviors.PermissionController,
                TPMBehaviors.UpdateDataBehavior
            ],

            properties: {
                newVisitDetails: {
                    type: Object,
                    observer: '_detailsChanged'
                },
                visit: {
                    type: Object,
                    notify: true
                },
                errorObject: {
                    type: Object,
                    notify: true
                },
                basePermissionPath: {
                    type: String,
                    notify: true
                },
                postfix: {
                    type: String,
                    value: 'visit'
                }
            }
        });
    </script>
</dom-module>
